---
sidebar: auto
metaTitle: Extract Facebook Ads Data
description: Use Meltano to extract Facebook Ads data from the Facebook Marketing API and insert it into Postgres, Snowflake, and more.
---

# Facebook Ads

The Facebook Ads extractor pulls raw data from the [Facebook Marketing API](https://developers.facebook.com/docs/marketing-apis) and extracts the following resources from a Facebook Ads account:

- Ad Creatives
- Ads
- Ad Sets
- Campaigns
- Ads Insights
  - Breakdown by age and gender
  - Breakdown by country
  - Breakdown by placement and device

For more information you can check [the documentation for tap-facebook](https://gitlab.com/meltano/tap-facebook).

## Facebook Ads Setup

In order to access your Facebook Ads data, you will need the following:

- Account ID
- Access Token
- Start Date
- End Date

<h3 id="account-id">Account ID</h3>

Your Facebook Ads Account ID.

<h3 id="access-token">Access Token</h3>

User Token generated by Facebook OAuth handshake.

The process for getting the access token is described in [Facebook's documentaion on getting a token via Graph API Explorer](https://developers.facebook.com/docs/marketing-api/access#graph-api-explorer):

1. Obtain a Short-Lived User Access Token
   - Go to [Graph API Explorer](https://developers.facebook.com/tools/explorer/).
   - In Application, select an app used to obtain the access token.
   - Click Get Token > Get User Token.
   - Under Events, Groups & Pages, Check `manage_pages`
   - Also select the following permissions: `ads_management`, `ads_read`, and `business_management`.
   - Click Get Access Token.
   - Click `i` in the access token field.
   - Click Open in Access Token Tool to see the token in Access Token Debugger.

1. Check Properties in Access Token Debugger
   
   Paste the access token copied in the last step above to the text field and click Debug button. 

   Please check:

   - App ID: The app id
   - User ID: You, a person who has admin right to the Facebook Page
   - Expires: A time stamp. A short-lived token expires in an hour or two
   - Scope: Should contain the assigned permissions.

1. Exchange for Long-Lived Access Token
   - Click Extend Access Token to get a long-lived token.
   - Copy the long-lived token.
   - Check the properties of this access token in Access Token Debugger. It should have a longer time, such as 60 days, or Never under Expires.

<h3 id="start-date">Start Date</h3>

This property allows you to configure where you want your extracted data set to start from. 

:::tip Configuration Notes

- Determines how much historical data will be extracted.
- Please be aware that the larger the time period and amount of data, the longer the initial extraction can be expected to take.

:::

<h3 id="end-date">End Date</h3>

This property allows you to configure where you want your extracted data set to end. Otherwise, if left blank, it will try to fetch all the Ads data from the Start Date until the date you run the Extractor.

## Meltano Setup

### Prerequisites

- [Running instance of Meltano](/docs/getting-started.html)

### Configure the Extractor

Open your Meltano instance and click "Pipelines" in the top navigation bar. You should now see the Extractors page, which contains various options for connecting your data sources.

![Screenshot of Meltano UI with all extractors not installed and Facebook Ads Extractor highlighted](/images/facebook-tutorial/01-facebook-extractor-selection.png)

Let's install the Facebook Ads Extractor by clicking on the `Install` button inside its card.

On the configuration modal we want to enter the Account ID and Access Token that Facebook Ads extractor will use to connect to the Facebook Marketing API, the Start Date we want the extracted data set to start from and the End Date.

![Screenshot of the Facebook Ads Extractor Configuration](/images/facebook-tutorial/02-facebook-configuration.png)


## Advanced: Command Line Installation

1. Navigate to your Meltano project in the terminal
1. Run the following command:

```bash
meltano add extractor tap-facebook
```

If you are successful, you should see `Added and installed extractors 'tap-facebook'` in your terminal.

### Configuration

1. Open your project's `.env` file in a text editor
1. Add the following variables to your file:

Required:

```bash
export TAP_FACEBOOK_ACCOUNT_ID="123456789012345"
export TAP_FACEBOOK_ACCESS_TOKEN="YOUR ACCESS TOKEN"
export TAP_FACEBOOK_START_DATE="2019-12-01T00:00:00Z"
```

Optional:

```bash
export TAP_FACEBOOK_END_DATE="2019-12-31T00:00:00Z"
export TAP_FACEBOOK_INSIGHTS_BUFFER_DAYS=0
```

If `TAP_FACEBOOK_INSIGHTS_BUFFER_DAYS` sets how many days to start extracting Ads Insights before the **start_date** (default: 0)

Check the [README](https://gitlab.com/meltano/tap-facebook) for more details.
